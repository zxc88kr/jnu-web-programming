<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>산수를 풀어봅시다</title>
	<style>
		.question {
			width: 60px;
		}
		button#re {
			margin-left: 40px;
		}
	</style>
	<script>
		function mark() {
			let questions = document.querySelectorAll(".question");
			let answers = document.querySelectorAll(".answer");
			let score = document.querySelector("#score");

			let n = 0;
			for (let i = 0; i < questions.length; i++) {
				let question = questions[i].innerHTML;
				let answer = answers[i].value;

				if (answer == "" || isNaN(answer)) {
					questions[i].style.textDecoration = "line-through";
				} else if (Math.floor(eval(question)) == parseInt(answer)) {
					questions[i].style.textDecoration = "none";
					n++;
				} else {
					questions[i].style.textDecoration = "line-through";
				}
			}
			score.innerHTML = n;
		}

		function restart() {
			let questions = document.querySelectorAll(".question");
			let answers = document.querySelectorAll(".answer");
			let score = document.querySelector("#score");

			let ops = ["+", "-", "*", "/"];
			for (let i = 0; i < questions.length; i++) {
				let a = Math.floor(Math.random() * 100) + 1;
				let b = Math.floor(Math.random() * 100) + 1;
				let op = ops[Math.floor(Math.random() * 4)];

				questions[i].innerHTML = a + op + b;
				questions[i].style.textDecoration = "none";
				answers[i].value = "";
			}
			score.innerHTML = 0;
		}
	</script>
</head>
<body onload="restart();">
	<h3>산수 문제를 풀어봅시다.</h3>
	<p>
		자동으로 문제가 만들어집니다. 답 입력 후 채점 버튼을 누르세요.
		다시 버튼을 누르면 새로운 문제가 출력됩니다. 나누기 결과는 정수입니다.
	</p>
	<hr>
	<table>
		<tr>
			<td><div class="question">5*6</div></td>
			<td><input class="answer" type="text" size="8"></td>
		</tr>
		<tr>
			<td><div class="question">7+5*3</div></td>
			<td><input class="answer" type="text" size="8"></td>
		</tr>
		<tr>
			<td><div class="question">23*2</div></td>
			<td><input class="answer" type="text" size="8"></td>
		</tr>
		<tr>
			<td><div class="question">35-7</div></td>
			<td><input class="answer" type="text" size="8"></td>
		</tr>
		<tr>
			<td><button type="button" onclick="mark();">채점</button></td>
			<td><span id="score">0</span><button id="re" type="button" onclick="restart();">다시</button></td>
		</tr>
	</table>
</body>
</html>